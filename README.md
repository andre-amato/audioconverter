# AudioConverter: Speech-to-Text and Word Count Automation

This project automates the process of converting audio (both live speech and WhatsApp audio files) into text, and counting occurrences of specific keywords in the transcribed text. The results are saved into JSON and Excel files for further analysis.

## Table of Contents

- [Introduction](#introduction)
- [Setup](#setup)
- [Scripts Overview](#scripts-overview)
  - [Live Speech Transcription](#live-speech-transcription)
  - [WhatsApp Audio Transcription](#whatsapp-audio-transcription)
  - [Word Counting Scripts](#word-counting-scripts)
- [Usage](#usage)
- [Dependencies](#dependencies)

## Introduction

This project provides a streamlined approach for converting audio into text, saving the recognized text in a JSON format, and then counting occurrences of specific words like "치gua" and "esgoto." The project consists of the following components:

- Live speech transcription: Converts live audio to text and searches for keywords
- WhatsApp audio transcription: Converts .m4a audio files from WhatsApp into text and searches for keywords
- Word counting: Analyzes the transcribed text for occurrences of specific keywords and outputs the results to an Excel file

## Setup

1. Clone the repository:

```bash
git clone https://github.com/andre-amato/audioconverter.git
```

2. Navigate to the project directory:

```bash
cd audioconverter
```

3. Install the required Python dependencies:

```bash
pip install -r requirements.txt
```

## Scripts Overview

### 1. Live Speech Transcription (`convert_live_audio.py`)

This script continuously listens to live audio input from a microphone and saves transcriptions in a JSON file (`recognized_texts.json`). If specific keywords such as "치gua" or "esgoto" are detected, the session is saved.

**Usage:**

```bash
python3 convert_live_audio.py
```

or

```bash
python3 convert_wpp_audio.py
```

**Output:**

- `recognized_texts.json`: A JSON file with all recognized speech sessions where keywords are detected.

### 2. WhatsApp Audio Transcription (`convert_wpp_audio.py`)

This script processes WhatsApp .m4a audio files stored in the `/audios` directory. It transcribes each audio file and saves the transcription in a JSON file (`recognized_texts_wpp.json`) if the keywords are detected.

**Usage:**

```bash
python3 convert_wpp_audio.py
```

**Output:**

- `recognized_texts_wpp.json`: A JSON file containing transcriptions of WhatsApp audio files where keywords are detected.

### 3. Word Counting Scripts

These scripts analyze the JSON files produced by the transcription scripts to count occurrences of the keywords "치gua" and "esgoto." The counts are saved to an Excel file for further analysis.

#### a) Count Words in Live Speech Transcriptions (`count_live_words.py`)

This script reads the `recognized_texts_live.json` file generated by the live speech transcription process and counts how many times the keywords "치gua" and "esgoto" appear in each session. It saves the counts in an Excel file.

**Usage:**

```bash
python3 count_live_words.py
```

**Output:**

- `output_live_counts.xlsx`: An Excel file with the counts of the keywords for each timestamped session from live audio.

#### b) Count Words in WhatsApp Audio Transcriptions (`count_wpp_words.py`)

This script reads the `recognized_texts_wpp.json` file generated by the WhatsApp audio transcription process and counts occurrences of the keywords. The results are saved in an Excel file.

**Usage:**

```bash
python3 count_wpp_words.py
```

**Output:**

- `output_wpp_counts.xlsx`: An Excel file with the counts of the keywords for each timestamped session from WhatsApp audio.

## Usage

### Step-by-Step Guide

1. **Live Speech Transcription:**

   - Start the script and begin speaking into the microphone
   - When you're done, stop the program using Ctrl+C
   - If any keywords were detected during the session, the recognized text will be saved to `recognized_texts_live.json`

2. **WhatsApp Audio Transcription:**

   - Place all .m4a audio files to be processed into the `/audios` directory
   - Run the script to process all the audio files in the directory
   - If keywords are detected, the recognized text will be saved to `recognized_texts_wpp.json`

3. **Count Words:**
   - Once the transcription JSON files are created, run the word counting scripts to analyze keyword occurrences
   - The results will be saved in `output_live_counts.xlsx` or `output_wpp_counts.xlsx`

## Dependencies

The project requires the following Python libraries:

- `speech_recognition`: For converting speech to text
- `pydub`: For audio file processing (specifically .m4a files from WhatsApp)
- `pandas`: For data manipulation and writing to Excel files
- `openpyxl`: For writing Excel files
- `json`: For handling JSON data

Install all dependencies using:

```bash
pip install -r requirements.txt
```

## Problems you may encounter:

If you find problems:

- Try to update the requirements
- Try updating both numpy and pandas to ensure they are compatible versions:

```bash
pip install --upgrade numpy pandas
```

Check the version of Python you are using, maybe you will need to use different commands
Ex:

```bash
pip
```

```bash
pip3
```

```bash
python
```

```bash
python3
```

## Knowledge

speechrecognition:

Used in: convert_live_audio.py and convert_wpp_audio.py
For converting live or pre-recorded speech into text.

pydub:

Used in: convert_wpp_audio.py
For handling and converting audio formats, specifically converting .m4a files (WhatsApp audio) to .wav before processing.

pandas:

Used in: count_live_words.py and count_wpp_words.py
For data manipulation and creating the Excel output file.

openpyxl:

Used in: count_live_words.py and count_wpp_words.py
For writing data to Excel files (.xlsx).
